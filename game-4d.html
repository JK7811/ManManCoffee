<!DOCTYPE html>
<html lang="zh-Hans">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>4 Number Draw Â· Casino Edition</title>

<style>
:root{
  --bg:#050507;
  --text:#F6F7FB;
  --gold:#FFD700;
  --line:rgba(255,255,255,.12);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Arial;
  color:var(--text);
  background:radial-gradient(circle at 30% 20%, rgba(255,215,130,.15), transparent 60%), var(--bg);
  overflow-x:hidden;
}
.wrap{max-width:900px;margin:auto;padding:30px 16px 100px}
h1{
  text-align:center;
  font-size:52px;
  background:linear-gradient(90deg,#fff,#FFD700,#FFB800);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.stage{
  margin-top:30px;
  height:280px;
  display:flex;
  justify-content:center;
  align-items:center;
  gap:14px;
}
.ball{
  width:80px;height:80px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-size:34px;font-weight:1000;
  border:1px solid rgba(255,215,130,.5);
  background:linear-gradient(180deg, rgba(255,255,255,.2), rgba(0,0,0,.4));
  box-shadow:0 0 40px rgba(255,215,130,.3);
  cursor:pointer;
  transition:.2s;
}
.ball.lock{
  border-color:#FFD700;
  box-shadow:0 0 80px rgba(255,215,130,.6);
}
.controls{
  display:flex;
  justify-content:center;
  gap:10px;
  flex-wrap:wrap;
  margin-top:20px;
}
button{
  padding:12px 16px;
  border-radius:12px;
  border:1px solid rgba(255,215,130,.5);
  background:rgba(255,255,255,.08);
  color:white;
  font-weight:900;
  cursor:pointer;
  transition:.2s;
}
button:hover{
  transform:translateY(-2px);
  background:rgba(255,215,130,.2);
}
.primary{
  background:#FFD700;
  color:#000;
  border:none;
}
.history{
  margin-top:30px;
  font-size:14px;
  max-height:200px;
  overflow:auto;
}
.history div{
  padding:8px 0;
  border-bottom:1px solid var(--line);
}
.modal{
  position:fixed;inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.6);
}
.modal.show{display:flex}
.modalBox{
  background:rgba(0,0,0,.8);
  border:1px solid #FFD700;
  padding:20px;
  border-radius:20px;
  text-align:center;
}
.modalCode{
  font-size:36px;
  letter-spacing:.3em;
  margin-top:10px;
  color:#FFD700;
}
.jackpot{
  position:fixed;
  inset:0;
  display:none;
  justify-content:center;
  align-items:center;
  font-size:90px;
  font-weight:1000;
  background:radial-gradient(circle,#FFD70055,transparent 60%);
  color:#FFD700;
  text-shadow:0 0 50px #FFD700;
}
.jackpot.show{display:flex;animation:flash .8s}
@keyframes flash{
  0%{opacity:0}
  50%{opacity:1}
  100%{opacity:0}
}
canvas{position:fixed;inset:0;pointer-events:none}
</style>
</head>

<body>

<div class="wrap">
<h1>ðŸŽ° 4 Number Draw</h1>

<div class="stage">
  <div class="ball" id="b1">0</div>
  <div class="ball" id="b2">0</div>
  <div class="ball" id="b3">0</div>
  <div class="ball" id="b4">0</div>
</div>

<div class="controls">
  <button class="primary" onclick="draw()">Draw</button>
  <button onclick="toggleTurbo()">Turbo</button>
  <button onclick="copyCode()">Copy</button>
  <button onclick="resetAll()">Reset</button>
</div>

<div class="history" id="history"></div>
</div>

<div class="modal" id="modal">
  <div class="modalBox">
    <div id="modalTitle">Result</div>
    <div class="modalCode" id="modalCode">0000</div>
    <div style="margin-top:15px">
      <button onclick="shareCode()">Share</button>
      <button onclick="closeModal()">Close</button>
    </div>
  </div>
</div>

<div class="jackpot" id="jackpot">JACKPOT</div>
<canvas id="confetti"></canvas>

<script>
const balls=[b1,b2,b3,b4];
let turbo=false;
let history=[];
let locks=[false,false,false,false];

balls.forEach((b,i)=>{
  b.addEventListener("click",()=>{
    locks[i]=!locks[i];
    b.classList.toggle("lock",locks[i]);
  });
});

function randomDigit(){return Math.floor(Math.random()*10);}

async function draw(){
  let duration=turbo?600:1200;
  let start=Date.now();
  while(Date.now()-start<duration){
    balls.forEach((b,i)=>{if(!locks[i])b.textContent=randomDigit();});
    await new Promise(r=>setTimeout(r,50));
  }
  let code=balls.map(b=>b.textContent).join("");
  showResult(code);
  history.unshift(code);
  renderHistory();
  checkJackpot(code);
}

function showResult(code){
  modalCode.textContent=code;
  modal.classList.add("show");
}

function closeModal(){modal.classList.remove("show");}

function copyCode(){
  navigator.clipboard.writeText(balls.map(b=>b.textContent).join(""));
}

function toggleTurbo(){turbo=!turbo;}

function resetAll(){
  balls.forEach(b=>b.textContent="0");
  history=[];
  renderHistory();
}

function renderHistory(){
  historyEl=history.map(h=>"<div>"+h+"</div>").join("");
  historyDiv=document.getElementById("history");
  historyDiv.innerHTML=historyEl;
}

function shareCode(){
  let code=modalCode.textContent;
  let text="æˆ‘åˆšæŠ½åˆ°å·ç ï¼š"+code+" ðŸŽ°";
  if(navigator.share){
    navigator.share({title:"4 Draw",text});
  }else{
    navigator.clipboard.writeText(text);
  }
}

function checkJackpot(code){
  if(/(\d)\1\1\1/.test(code)){
    jackpot.classList.add("show");
    burst();
    setTimeout(()=>jackpot.classList.remove("show"),800);
  }
}

/* Confetti */
const canvas=document.getElementById("confetti");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;
let pieces=[];
function burst(){
  for(let i=0;i<200;i++){
    pieces.push({
      x:canvas.width/2,
      y:canvas.height/2,
      vx:(Math.random()-0.5)*10,
      vy:(Math.random()-0.5)*10,
      size:Math.random()*5+2
    });
  }
}
function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  pieces.forEach(p=>{
    p.x+=p.vx;
    p.y+=p.vy;
    p.vy+=0.2;
    ctx.fillStyle="#FFD700";
    ctx.fillRect(p.x,p.y,p.size,p.size);
  });
  requestAnimationFrame(animate);
}
animate();
</script>

</body>
</html>